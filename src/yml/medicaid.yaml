medicaid:
  reference: "https://gitlab-int.rc.fas.harvard.edu/rse/francesca_dominici/dominici_data_pipelines/-/blob/master/medicaid/reports/schema.yml"
  tables:
    demographics:
      columns:
        - bene_id:
            type: "VARCHAR"
        - dob:
            type: "DATE"
        - dod:
            type: "DATE"
        - race_ethnicity_code:
            type: "INT"
            description: "https://resdac.org/cms-data/variables/raceethnicity-msis"
        - sex: "VARCHAR(1)"
      children:
        enrollments_year:
          parent: "bene_id"
          columns:
            - 'bene_id$year':
                type: "VARCHAR"
                description: "Composite key for the table"
            - year
                type: "INT"
            - state:
                type: "VARCHAR(2)"
            - residence_county:
                type: "VARCHAR(3)"
            - zip
            - months_eligible:
                type: "INT"
            - months_dual_eligible:
                type: "INT"
            - state_count:
                type: "INT"
            - dead:
                type: "BOOLEAN"
          children:
            enrollments_month:
              parent: "bene_id$year"
              columns:
                - 'bene_id$year$month':
                    type: "VARCHAR"
                    description: "Composite key for the table"
                - month:
                    type: "INT"
                - eligibility_code:
                    type: "INT"
                - managed_care_code:
                    type: "INT"
                    description: "https://resdac.org/cms-data/variables/managed-care-combinations-jan"
                - medicare_eligibility:
                    type: "INT"
                    values:
                      - 0
                      - 1
                      - 2
                      - 3
                - restrictions:
                    type: "VARCHAR(1)"
                    description: "https://resdac.org/cms-data/variables/restricted-benefits-jan"
              children:
                admissions:
                  parent:
                    name: "bene_id$year$month"
                    source: "YEAR(admission_date)$MONTH(admission_date)"
                  columns:
                    - admission_date:
                        type: "DATE"
                        original: "ADMSN_DT"
                    - service_end_date:
                        type: "DATE"
                        original: "SRVC_END_DT"
                    - diagnosis:
                        type: "VARCHAR[10]"
                        original: "DIAG_CD_*"

